{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Manual 'Mark follow-up done' action on Client Profile follow-up status",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Add a manual action button in the Follow-up Status UI to record a 'done' follow-up immediately using the existing follow-up recording flow, with loading/disabled states and error toasts.",
      "acceptanceCriteria": [
        "When viewing an activated client with a configured follow-up day, the Follow-up Status card shows a clear action button to manually mark the follow-up as done.",
        "Clicking the button records a follow-up entry with status = done for that client (using the existing follow-up recording flow), and the UI updates to show the status as Done.",
        "After marking as done, the new entry appears at the top of the Follow-up History table with the current timestamp and correct follow-up day.",
        "The button is disabled and shows a loading state while the follow-up record mutation is in progress.",
        "If recording fails, show a user-facing error toast using the appâ€™s existing error normalization/toast patterns."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/clients/FollowUpSection.tsx",
          "operation": "modify",
          "description": "Extend the Follow-up Status card UI to include a prominent manual action button (e.g., 'Mark follow-up done') and support props for triggering the action and reflecting loading/disabled state; keep the existing status indicator and history table behavior intact so the newest entry remains sorted to the top after data refresh."
        },
        {
          "path": "frontend/src/pages/ClientProfilePage.tsx",
          "operation": "modify",
          "description": "Wire the manual 'Mark follow-up done' button into the Client Profile page by adding a handler that calls the existing useRecordFollowUp mutation with done=true (and appropriate follow-up day), disables/shows loading while the mutation is pending, closes any open due prompt if applicable, and shows error toasts using normalizeError(...) and the existing toast pattern on failure."
        }
      ]
    }
  ]
}